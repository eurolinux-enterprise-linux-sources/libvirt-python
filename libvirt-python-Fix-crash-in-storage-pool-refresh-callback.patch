From c3e600b430787105f135e148aaca9b0b481dbfa3 Mon Sep 17 00:00:00 2001
Message-Id: <c3e600b430787105f135e148aaca9b0b481dbfa3@dist-git>
From: Pavel Hrdina <phrdina@redhat.com>
Date: Mon, 25 Jul 2016 10:27:18 +0200
Subject: [PATCH] Fix crash in storage pool refresh callback

Fixes copy-paste typo introduced by commit cb84e36c.

Resolves: https://bugzilla.redhat.com/show_bug.cgi?id=1354271

Signed-off-by: Pavel Hrdina <phrdina@redhat.com>
(cherry picked from commit a3a4425338017ecefd31b969f62a1b5803f92a5c)
Signed-off-by: Pavel Hrdina <phrdina@redhat.com>
---
 examples/event-test.py | 2 +-
 libvirt-override.c     | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/examples/event-test.py b/examples/event-test.py
index f0341b5..1bcea07 100755
--- a/examples/event-test.py
+++ b/examples/event-test.py
@@ -580,7 +580,7 @@ def myStoragePoolEventLifecycleCallback(conn, pool, event, detail, opaque):
                                                                           storageEventToString(event),
                                                                           detail))
 
-def myStoragePoolEventRefreshCallback(conn, pool, event, detail, opaque):
+def myStoragePoolEventRefreshCallback(conn, pool, opaque):
     print("myStoragePoolEventRefreshCallback: Storage pool %s" % pool.name())
 
 ##########################################################################
diff --git a/libvirt-override.c b/libvirt-override.c
index 8f21cfd..72b4b6b 100644
--- a/libvirt-override.c
+++ b/libvirt-override.c
@@ -8862,7 +8862,7 @@ libvirt_virConnectStoragePoolEventGenericCallback(virConnectPtr conn ATTRIBUTE_U
     /* Call the Callback Dispatcher */
     pyobj_ret = PyObject_CallMethod(pyobj_conn,
                                     (char*)"_dispatchStoragePoolEventGenericCallback",
-                                    (char*)"OiiO",
+                                    (char*)"OO",
                                     pyobj_pool,
                                     pyobj_cbData);
 
-- 
2.9.2

